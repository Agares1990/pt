{% extends "base.html.twig" %}
{% block contenu %}
  <h1>Bienvenue <span>{{client.prenom}}<span></h1>
    <form class="" action="profile.php" method="post">
  <table>
    <thead>
        <tr>
            <th colspan="7">Votre (vos) réservation(s)</th>
        </tr>
        <tr>
            <th>Chambre</th>
            <th>Date d'arrivée</th>
            <th>Daté de départ</th>
            <th>Nombre de personnes</th>
            <th>Nombre d'enfants</th>
            <th>Modifier la réservation</th>
            <th>Annuler la réservation</th>
        </tr>
    </thead>
    <tbody>
        {% for reservation in reservations %}

            <tr>
                <td>{{reservation.nomCategorie}}</td>
                <td>{{reservation.dateArriver}}</td>
                <td>{{reservation.dateDepart}}</td>
                <td>{{reservation.nbPerson}}</td>
                <td>{{reservation.nbChild}}</td>
                <td>
                  <form class="" action="profile.php#formChek" method="post">
                    <input type="hidden" name="idReservation" value="{{reservation.idReservationChambre}}">
                    <input type="hidden" name="idCategorieChambre" value="{{reservation.categorieChambreId}}">
                    <input type="hidden" name="chambreId" value="{{reservation.chambreId}}">
                    <input type="hidden" name="modification" value="1">
                    <input type="submit" id="update" value="Modifier la date">
                  </form>
                </td>
                <td>
                  <form class="" action="profile.php" method="post">
                    <input type="submit" name="delete" value="Annuler" onclick="return(confirm('Etes-vous sûr de vouloir annuler cette réservation?'));"></td>
                    <input type="hidden" name="idReservation" value="{{reservation.idReservationChambre}}">
                    <input type="hidden" name="idCategorieChambre" value="{{reservation.categorieChambreId}}">
                    <input type="hidden" name="delete" value="1">
                  </form>
            </tr>

        {% endfor %}
    </tbody>
</table>
</form>
<h2>{{messageSucces}}</h2>


{% if modification == 1 %}
<!-- Formulaire de check-in -->
<section>
  <article id="checkIn">
      <!-- formulaire de recherche de chambre dispo -->
      <h2>Modifier votre <span>réservation</span></h2>
    <form id="formChek" action="profile.php" method="POST">
        <input type="text" id="fromDate" name="CheckIn" required="required" placeholder="Date d'arriver" value="">
        <input type="text" id="toDate" name="CheckOut" required="required" placeholder="Date de départ" value="">
        <input type="hidden" id="idCategorieChambre" name="idCategorieChambre" value="{{idCategorieChambre}}">
        <input type="hidden" name="idReservation" value="{{idReservation}}">
        <input type="hidden" name="idChambre" value="{{roomsCheck.idChambre}}">
        <input type="hidden" name="verify" value="1">
        <input type="submit" value="Vérifie disponibilité">

    </form>
  </article>
</section>
{% endif %}
{% if verify == 1 %}
<section id="room">
        <article>
          {% if roomsCheck.tarifCategorieChambre * nbDay != 0 %}
            <table>
              <thead>
                  <tr>
                      <th colspan="5">Confirmer votre modification</th>
                  </tr>
                  <tr>
                      <th>Date d'arrivée</th>
                      <th>Daté de départ</th>
                      <th>Total à payer</th>
                      <th>Modifier la réservation</th>
                  </tr>
              </thead>
              <tbody>

                      <tr>
                          <td>{{dateArriver}}</td>
                          <td>{{dateDepart}}</td>
                          <td>{{roomsCheck.tarifCategorieChambre * nbDay}}</td>
                          <td>
                            <form class="" action="profile.php" method="post">
                              <input type="hidden" name="CheckIn" value="{{dateArriver}}">
                              <input type="hidden" name="CheckOut" value="{{dateDepart}}">
                              <input type="hidden" name="idReservation" value="{{idReservation}}">
                              <input type="hidden" name="idChambre" value="{{roomsCheck.idChambre}}">
                              <input type="hidden" name="updateResa" value="1">
                              <input type="submit" id="update" value="Valider la modification">
                            </form>
                          </td>
                      </tr>
              </tbody>
          </table>
          {% endif %}
          {% if roomsCheck.tarifCategorieChambre * nbDay == 0 %}
            <h3>Désolé, nous n'avons pas de disponibilité pendant ces dates</h3>
          {% endif %}
        </article>
        <h2>{{message}}</h2>

</section>
{% endif %}
{% endblock %}
